<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>진행바</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=East+Sea+Dokdo&display=swap');

    * {
      font-family: 'East Sea Dokdo', cursive;
    }

    #전체 {
      width: 800px;
      height: fit-content;
      margin: 0 auto 0 auto;
    }

    .부분 {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
    }

    .이름 {
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    .메인페이지 {
      width: 20%;
      height: fit-content;
    }

    .검색기능 {
      width: 20%;
      height: fit-content;
    }

    .달성도기능 {
      width: 20%;
      height: fit-content;
    }

    .방명록기능 {
      width: 20%;
      height: fit-content;
    }

    .개인페이지 {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-items: center;

      margin-bottom: 20px;
      width: 100%;
      height: fit-content;
    }

    .그래프바 {
      margin: 5px auto 5px auto;
      width: 100%;
      height: 30px;
      background-color: transparent;
      border: 2px solid black;
      border-radius: 35px;
    }

    #전체달성도 {
      width: 0%;
      height: 100%;
      border-radius: 35px;
      background-color: cornflowerblue;
    }
  </style>

  <script type="module">
    // Firebase SDK 라이브러리 가져오기
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


    // Firebase 구성 정보 설정
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyAdIl_U6W_Kteqn9DjSkvWn3psi7Rg99P8",
      authDomain: "spparrta.firebaseapp.com",
      projectId: "spparrta",
      storageBucket: "spparrta.appspot.com",
      messagingSenderId: "433129692805",
      appId: "1:433129692805:web:740ff9452040f5e2f6d3ec",
      measurementId: "G-ZYJX3T384M"
    };


    // Firebase 인스턴스 초기화
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    //달성도
    $(".올리기").click(async function () {

      let boxes = document.querySelectorAll("input[type='checkbox']:checked");
      let 체크됨 = boxes.length;

      let 올리기 = { '체크됨': 체크됨 };
      await addDoc(collection(db, "달성도값"), 올리기);
      window.location.reload();
    });
    
    import { doc, onSnapshot } from "firebase/firestore";

      let 가져오기 = onSnapshot(doc(db, "달성도값"), (doc) => {
      console.log("Current data: ", doc.data());
    });
    let 임시 = `<progress class="status" value="${달성률}" max="8"></progress>`;

    $('#status').append(임시);

  </script>

</head>

<body>

  <div id="전체">
    <div class="부분">
      <div class="메인페이지" style="margin-right: 5%;">
        <form style="font-size: 20px;">
          <input id="메인" type="checkbox" style="margin-left: 2.5%;">메인페이지
        </form>
      </div>

      <div class="검색기능" style="margin-right: 5%;">
        <form style="font-size: 20px;">
          <input id="검색" type="checkbox" style="margin-left: 2.5%;">검색기능
        </form>
      </div>
      <div class="달성도기능" style="margin-right: 5%;">
        <form style="font-size: 20px;">
          <input id="달성도" type="checkbox" style="margin-left: 2.5%;">달성도기능
        </form>
      </div>

      <div class="방명록기능">
        <form style="font-size: 20px;">
          <input id="방명록" type="checkbox" style="margin-left: 2.5%;">방명록기능
        </form>
      </div>
    </div>

    <div class="개인페이지">
      <h4>개인 페이지</h4>
      <form class="이름" style="font-size: 20px;">
        <input id="김민선" type="checkbox">김민선
        <input id="김성훈" type="checkbox" style="margin-left: 10%;">김성훈
        <input id="유민아" type="checkbox" style="margin-left: 10%;">유민아
        <input id="이에진" type="checkbox" style="margin-left: 10%;">이예진
      </form>
    </div>
    <div class="btn_ach">
      <button class="올리기">반영하기</button><br>
      <progress id="status"></progress>
    </div>


  </div>

</body>

</html>